@tailwind base;
@tailwind components;
@tailwind utilities;

/* iOS Safari でもフォームを常にライトにする */
:root { color-scheme: light; }
html { text-size-adjust: 100%; }
html,body { height: 100%; }
body { @apply bg-white text-neutral-900 antialiased; }

/* BottomNav に隠れないように常時下余白を確保 */
main { padding-bottom: calc(env(safe-area-inset-bottom) + 72px); }
 
 @layer components {
   /* PCで横幅をしっかり使う */
  .container { @apply mx-auto max-w-screen-xl px-4 sm:px-6; }
  .container-wide { @apply mx-auto max-w-[1400px] px-4 sm:px-6; }
  .text-balance { text-wrap: balance; }
   /* Yellow section (もうすぐ成立) アクセント */
   .section--emphasis { @apply container py-12 bg-gradient-to-b from-amber-50 to-orange-50 border-y border-orange-100; }
   /* タイトル/本文の安全な折返し & 行数制限 */
   .np-title { @apply font-semibold text-neutral-900 break-words; }
   .np-text  { @apply text-neutral-700 break-words; }
   /* line-clamp (plugin無し) */
   .line-clamp-1{ display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:1; overflow:hidden; }
   .line-clamp-2{ display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow:hidden; }
   .line-clamp-3{ display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; overflow:hidden; }
   /* フォーム統一 */
   .np-input { @apply bg-white text-neutral-900 placeholder:text-neutral-400 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-600 focus:border-brand-600; }
   .np-textarea { @apply np-input min-h-[120px]; }
   /* テキストバランス */
   .text-balance { text-wrap: balance; }
   .content-wrap { word-break: break-word; overflow-wrap: anywhere; }
   /* 入力を常に白に（iOSの自動ダーク無効化） */
   .np-input { @apply bg-white text-neutral-900 placeholder:text-neutral-400 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-600 focus:border-brand-600; }
   .np-textarea { @apply np-input min-h-[120px]; }
   .text-balance { text-wrap: balance; }
   /* 港トーンの面 */
   .hero-harbor { @apply bg-gradient-to-b from-foam-50 to-white ring-1 ring-black/5; }
   .hero-sky    { @apply bg-gradient-to-br from-sky-100 via-indigo-50 to-white ring-1 ring-black/5; }
   .surface-soft { @apply rounded-2xl bg-white/95 shadow-card border border-black/5; }
      .kicker { @apply inline-flex items-center gap-2 text-sm font-medium text-blue-700; }
   
   /* うっすら波パターン（パフォーマンス軽いCSS） */
   .sea-waves {
     --c1: rgba(20,184,166,.08); --c2: rgba(37,99,235,.06);
     background:
       radial-gradient(60% 100% at 50% 120%, var(--c1), transparent 60%),
       radial-gradient(70% 120% at 50% 120%, var(--c2), transparent 60%),
       linear-gradient(to bottom, #fff, #fff);
   }
   /* セクション区切りの"さざ波" */
   .wave-divider {
     -webkit-mask: radial-gradient(55% 12px at 10px 12px,#0000 98%,#000) 0 0/20px 100%;
             mask: radial-gradient(55% 12px at 10px 12px,#0000 98%,#000) 0 0/20px 100%;
     background: linear-gradient(to right, rgba(20,184,166,.18), rgba(37,99,235,.18));
     height: 10px;
   }
   .np-buoy { @apply inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-[12px] font-medium bg-buoy-500/10 text-buoy-500; }
   
   /* --- Nautical visuals ------------------------------------ */
   /* 空→海の淡グラデ + 薄い枠 */
   .hero-ocean { @apply bg-gradient-to-b from-sky-100 via-cyan-50 to-white ring-1 ring-black/5 rounded-2xl; }

   /* セクション下端の白波。SVGを使うので土台だけ用意 */
   .wave-holder { @apply relative overflow-hidden rounded-2xl; }
   .wave-svg { position:absolute; left:0; right:0; bottom:-1px; width:100%; height:48px; }

   /* ステップカード（白面＋淡影＋大きめ字間） */
   .step-card { @apply surface-soft p-5 sm:p-6 text-neutral-700; }
   .step-kicker { @apply text-sm font-medium text-blue-700 inline-flex items-center gap-2; }

   /* モチーフは全部飾り。読み上げ防止 */
   .decoration { pointer-events:none; }
   .card { @apply rounded-2xl border border-white/10 bg-white/5 backdrop-blur p-4 shadow-lg; }
   
   /* Boat micro-interaction -------------------------------------------------- */
   @keyframes np-boat-sail {
     0%   { transform: translateX(0) translateY(0) rotate(0deg); }
     20%  { transform: translateX(20vw) translateY(-2px) rotate(-1deg); }
     40%  { transform: translateX(40vw) translateY(1px)  rotate(1deg); }
     60%  { transform: translateX(65vw) translateY(-1px) rotate(-.5deg); }
     80%  { transform: translateX(90vw) translateY(1px)  rotate(.5deg); }
     100% { transform: translateX(120vw) translateY(0) rotate(0deg); }
   }
   @keyframes np-boat-wake {
     0%   { stroke-opacity:.9; filter: blur(0px); }
     60%  { stroke-opacity:.5; filter: blur(1px); }
     100% { stroke-opacity:0;  filter: blur(2px); }
   }
   .np-boat { animation: np-boat-sail var(--dur,2.8s) ease-in-out forwards; }
   .np-wake { animation: np-boat-wake var(--dur,2.8s) ease-out forwards; }
   
   /* 低モーション配慮 */
   @media (prefers-reduced-motion: reduce) {
     .np-boat, .np-wake { animation: none !important; display: none; }
   }
   
   /* 軽い港味のマイクロ演出 */
   @keyframes np-bob { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-2px) } }
   .bob { animation: np-bob 3s ease-in-out infinite; transform-origin: 50% 100%; }
   
   /* ボタンのさざ波クリック */
   .btn-wave { position: relative; overflow: hidden; }
   .btn-wave:after {
     content:""; position:absolute; inset:auto; left:50%; top:50%;
     width:0; height:0; background:rgba(59,130,246,.25); border-radius:9999px;
     transform:translate(-50%,-50%); pointer-events:none;
   }
   .btn-wave:active:after { width:220%; height:220%; transition: width .35s ease, height .35s ease, opacity .6s ease; opacity:0; }
   
   /* カードの"持ち上がり"＋"軽い押し込み" */
   .card-hover { transition: transform .15s ease, box-shadow .15s ease; }
   .card-hover:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(0,0,0,.06) }
   .card-press:active { transform: translateY(0) scale(.98) }
   
   /* "タップできるヒント"のパルス */
   .pulse-dot::after{
     content:""; display:inline-block; width:6px; height:6px; margin-left:.35rem;
     border-radius:9999px; background:#3b82f6; box-shadow:0 0 0 0 rgba(59,130,246,.6);
     animation: pulse 1.8s cubic-bezier(.66,0,0,1) infinite;
   }
   @keyframes pulse{100%{box-shadow:0 0 0 10px rgba(59,130,246,0)}}
  .btn { @apply inline-flex items-center justify-center gap-2 rounded-lg h-11 px-4 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-offset-2 focus:ring-brand-500; }
  .btn-primary { @apply btn bg-brand-600 text-white hover:bg-brand-500 focus:ring-brand-500; }
  .btn-ghost { @apply btn bg-white/5 hover:bg-white/10 focus:ring-white/20; }
  .chip { @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-white/10 border border-white/20; }
  .progress { @apply w-full h-2 bg-white/10 rounded-full overflow-hidden; }
  .progress-bar { @apply h-full bg-gradient-to-r from-emerald-500 to-blue-500 rounded-full transition-all duration-300; }
  
  /* Readdy UI Tokens */
  .section { @apply container py-12 bg-white; }
  .np-card { @apply rounded-xl shadow-card border border-black/5 bg-white/90 dark:bg-white/5; }
  .np-badge { @apply rounded-full px-2.5 py-0.5 text-xs font-medium; }
  .np-progress { @apply h-2 rounded-full overflow-hidden; }
  
  h1 { @apply text-2xl sm:text-3xl font-semibold tracking-tight; }
  h2 { @apply text-xl sm:text-2xl font-semibold tracking-tight; }
  p  { @apply leading-7 text-neutral-300; }
  a { @apply text-brand-600 underline-offset-4 hover:underline; }
}
